---
title: JSON Configuration Translation
description: Learn how to translate Starlight configuration strings and enable multi-lingual titles
---

## Overview

The JSON configuration translation feature enables you to translate structured configuration strings for Astro Starlight and other applications. This creates a **nested locale structure** where each translatable string contains multiple language versions in a single file, making it perfect for **multi-lingual site titles**, navigation labels, and other configuration text.

## How It Works

1. **Extract translatable strings** into a JSON file
2. **Run the translator** on the JSON file  
3. **Import and use** the nested locale structure in your code

## Quick Start

### Step 1: Create Translation JSON

Create a JSON file with your translatable configuration strings:

```json title="config-strings.json"
{
  "title": "My Documentation Site",
  "description": "A comprehensive guide to our project",
  "sidebar": {
    "reference": "Reference",
    "guides": "Guides",
    "examples": "Examples"
  },
  "hero": {
    "tagline": "Build amazing docs with ease"
  }
}
```

### Step 2: Run Translation

Include the JSON file in your translation workflow:

```yaml title=".github/workflows/translate.yml"
- uses: pelikhan/action-continuous-translation@v0
  with:
    files: "README.md docs/**/*.mdx config-strings.json"
    lang: fr,es,de
    starlight_dir: docs
```

This will transform your JSON file into a nested locale structure:

```json title="config-strings.json (after translation)"
{
  "title": {
    "en": "My Documentation Site",
    "fr": "Mon Site de Documentation", 
    "es": "Mi Sitio de Documentaci√≥n",
    "de": "Meine Dokumentationsseite"
  },
  "description": {
    "en": "A comprehensive guide to our project",
    "fr": "Un guide complet de notre projet",
    "es": "Una gu√≠a completa de nuestro proyecto", 
    "de": "Ein umfassender Leitfaden f√ºr unser Projekt"
  },
  "sidebar": {
    "reference": {
      "en": "Reference",
      "fr": "R√©f√©rence",
      "es": "Referencia",
      "de": "Referenz"
    },
    "guides": {
      "en": "Guides", 
      "fr": "Guides",
      "es": "Gu√≠as",
      "de": "Leitf√§den"
    },
    "examples": {
      "en": "Examples",
      "fr": "Exemples", 
      "es": "Ejemplos",
      "de": "Beispiele"
    }
  },
  "hero": {
    "tagline": {
      "en": "Build amazing docs with ease",
      "fr": "Cr√©ez de superbes docs facilement",
      "es": "Crea documentos incre√≠bles con facilidad",
      "de": "Erstelle m√ºhelos fantastische Docs"
    }
  }
}
```

### Step 3: Use in Starlight Configuration

Import and use the nested translations in your `astro.config.mjs`:

```javascript title="astro.config.mjs"
// @ts-check
import { defineConfig } from "astro/config";
import starlight from "@astrojs/starlight";

// Import the single translation file with nested locale structure
import configStrings from "./config-strings.json" with { type: "json" };

// Helper function to get localized string from nested structure
function getLocalizedString(keyPath, locale = 'en') {
  const keys = keyPath.split('.');
  let value = configStrings;
  
  // Navigate through the nested structure
  for (const key of keys) {
    if (value && typeof value === 'object' && key in value) {
      value = value[key];
    } else {
      return null;
    }
  }
  
  // If we have a locale object, return the requested locale or fallback to English
  if (value && typeof value === 'object' && !Array.isArray(value)) {
    return value[locale] || value['en'] || null;
  }
  
  return value;
}

export default defineConfig({
  integrations: [
    starlight({
      // Multi-lingual site title! üéâ
      title: {
        en: getLocalizedString('title', 'en'),
        fr: getLocalizedString('title', 'fr'),
        es: getLocalizedString('title', 'es'),
        de: getLocalizedString('title', 'de'),
      },
      
      defaultLocale: "en",
      locales: {
        en: { label: "English", lang: "en" },
        fr: { label: "Fran√ßais", lang: "fr" },
        es: { label: "Espa√±ol", lang: "es" },
        de: { label: "Deutsch", lang: "de" },
      },
      
      sidebar: [
        {
          label: getLocalizedString('sidebar.reference', 'en'),
          autogenerate: { directory: "reference" },
        },
        {
          label: getLocalizedString('sidebar.guides', 'en'), 
          autogenerate: { directory: "guides" },
        },
      ],
    }),
  ],
});
```

## Benefits of Nested Structure

‚úÖ **Single file import** - No need to import separate files per language  
‚úÖ **Type safety** - Better IntelliSense and error checking  
‚úÖ **Easy maintenance** - All translations for a key are in one place  
‚úÖ **Automatic fallbacks** - Missing translations fall back to English  
‚úÖ **Version control friendly** - See all translation changes in one diff

## Supported File Types

The translator now accepts these file types:

- **Markdown**: `.md`, `.mdx` - For documentation content
- **JSON**: `.json` - For configuration strings (NEW!)

## Translation Behavior

### What Gets Translated

- String values longer than 2 characters
- Nested object values (recursively)
- Array string elements

### What Doesn't Get Translated

- Object keys (preserved as-is)
- Constant identifiers (ALL_CAPS patterns)
- Very short strings (‚â§2 characters)
- Empty or whitespace-only strings

### Example Translation

**Input** (`config-strings.json`):
```json
{
  "title": "Continuous Translation",
  "API_VERSION": "v1.0",  // Not translated (constant)
  "nav": {
    "home": "Home",       // Will be translated
    "docs": "Documentation" // Will be translated
  }
}
```

**Output** (same file, after translation):
```json
{
  "title": {
    "en": "Continuous Translation",
    "fr": "Traduction Continue"
  },
  "API_VERSION": "v1.0",  // Unchanged (constant)
  "nav": {
    "home": {
      "en": "Home",
      "fr": "Accueil"
    },
    "docs": {
      "en": "Documentation",
      "fr": "Documentation"
    }
  }
}
```

## Best Practices

### 1. Organize by Feature
Group related strings together:

```json
{
  "navigation": {
    "home": "Home",
    "about": "About",
    "contact": "Contact"
  },
  "buttons": {
    "submit": "Submit",
    "cancel": "Cancel"
  }
}
```

### 2. Use Descriptive Keys
Make keys self-documenting:

```json
{
  "page_title_home": "Welcome to our site",
  "error_message_404": "Page not found",
  "button_text_submit": "Submit Form"
}
```

### 3. Keep Constants Separate
Don't mix translatable text with configuration values:

```json
{
  // Translatable content
  "ui_strings": {
    "welcome": "Welcome to our app"
  },
  
  // Non-translatable config (separate file recommended)
  "api_endpoints": {
    "base_url": "https://api.example.com"
  }
}
```

## Troubleshooting

### Translations Not Generated

1. **Check file inclusion**: Ensure your JSON file is in the `files` parameter
2. **Verify format**: JSON must be valid (use a JSON validator)
3. **Review logs**: Check GitHub Actions logs for translation errors

### Missing Translations

1. **Check string length**: Very short strings (‚â§2 chars) aren't translated
2. **Verify cache**: Use `force: true` to bypass cache if needed
3. **Review format**: Constants (ALL_CAPS) are preserved as-is

### Import Errors

1. **Check Node version**: JSON imports require Node.js 18+ with `type: "json"`
2. **Update syntax**: Use `import ... with { type: "json" }` syntax
3. **Verify paths**: Ensure JSON files are in correct relative locations

## Advanced Usage

### Multiple Language Addition

You can run the translator multiple times to add more languages:

```bash
# First run: Add French
genaiscript run translator config-strings.json -x lang=fr

# Second run: Add Spanish  
genaiscript run translator config-strings.json -x lang=es

# Third run: Add German
genaiscript run translator config-strings.json -x lang=de
```

Each run will add the new language to the existing nested structure.

### Type Safety with TypeScript

Define types for your nested configuration:

```typescript
interface LocalizedString {
  en: string;
  fr?: string;
  es?: string;
  de?: string;
  [locale: string]: string | undefined;
}

interface ConfigStrings {
  title: LocalizedString;
  description: LocalizedString;
  sidebar: {
    reference: LocalizedString;
    guides: LocalizedString;
  };
}

const configStrings: ConfigStrings = {
  // ... your nested strings
};
```

This feature opens up powerful possibilities for creating truly multilingual Starlight documentation sites with a clean, maintainable structure! üåç